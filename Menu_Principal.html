<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Menú de Series | Leno Style</title>

  <!-- Estilos base del tema Leno -->
  <link rel="stylesheet" href="css/bootstrap.css">
  <link rel="stylesheet" href="css/fontawesome-all.css">
  <link rel="stylesheet" href="css/styles.css">

  <!-- Fuente moderna -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>

  <style>
   /* =================== FUENTE GLOBAL =================== */
body {
  font-family: 'Poppins', sans-serif;
  background-color: #f8fafc;
  color: #2d3748;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* =================== ENCABEZADO STICKY =================== */
.header {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  background: linear-gradient(90deg, #00bfd8 0%, #0072ff 100%);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);
  z-index: 1100;
  padding: 10px 24px;
}

/* Contenedor interno: título | filtros | botón */
.header .header-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 16px;
  width: 100%;
}

/* Zona izquierda (Título) */
.header .left {
  display: flex;
  align-items: center;
  gap: 12px;
  min-width: 220px;
}

.logo-text {
  font-size: 1.25rem;
  color: #ffffff;
  font-weight: 600;
  margin: 0;
  display: flex;
  align-items: center;
  gap: 10px;
}

/* Zona central (Filtros) */
.header .center {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  flex: 1 1 auto;
  max-width: 900px;
  padding: 6px 12px;
}

.filtros-inline {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
  flex-wrap: nowrap;
  overflow-x: auto;
  padding-bottom: 2px;
}

/* Inputs y selects estilo Leno */
.leno-select,
.leno-input {
  border-radius: 30px;
  border: 2px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.95);
  padding: 10px 16px;
  font-size: 0.95rem;
  color: #1f2937;
  min-width: 200px;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.06);
}

.leno-select:focus,
.leno-input:focus {
  border-color: rgba(255, 255, 255, 0.95);
  outline: none;
  box-shadow: 0 0 0 4px rgba(0, 191, 216, 0.12);
}

/* Zona derecha (Botón cerrar sesión rojo) */
.header .right {
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 160px;
  justify-content: flex-end;
}

/* Botón rojo moderno */
.btn-solid-sm {
  background: #dc3545;
  color: #ffffff;
  font-weight: 600;
  padding: 9px 18px;
  border-radius: 30px;
  border: none;
  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.08);
  transition: all 0.25s ease;
  display: inline-flex;
  align-items: center;
  gap: 8px;
}

.btn-solid-sm:hover {
  background: #b02a37;
  transform: scale(1.05);
  box-shadow: 0 10px 22px rgba(0, 0, 0, 0.15);
}

/* Icono del título */
.logo-text .fa-film {
  font-size: 1.05rem;
  opacity: 0.95;
}

/* =================== CONTENIDO PRINCIPAL =================== */
.main-content {
  margin-top: 86px;
  padding: 18px;
}

/* =================== TARJETAS (CARDS) =================== */
.series-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center; /* Centra las cards */
  gap: 30px;
  padding: 20px;
  margin-top: 10px;
}

/* Card individual */
.serie-card {
  background: #fff;
  border-radius: 20px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.08);
  overflow: hidden;
  width: 270px; /* tamaño fijo */
  transition: all 0.3s ease;
  text-align: center;
}

.serie-card:hover {
  transform: translateY(-10px);
  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
}

/* Imagen */
.serie-card img {
  width: 100%;
  height: 350px;
  object-fit: cover;
}

/* Contenido */
.serie-info {
  padding: 20px;
}

.serie-info h3 {
  color: #0072ff;
  font-weight: 700;
  font-size: 1.3rem;
}

.serie-info p {
  color: #555;
  margin-bottom: 10px;
}

/* Botón ver */
.btn-ver {
  background: linear-gradient(90deg, #00bfd8 0%, #0072ff 100%);
  border: none;
  border-radius: 50px;
  padding: 10px 25px;
  color: #fff;
  font-weight: 600;
  transition: all 0.3s ease;
  display: inline-block;
  text-decoration: none;
}

.btn-ver:hover {
  transform: scale(1.05);
}

/* =================== RESPONSIVE =================== */
@media (max-width: 1100px) {
  .leno-select,
  .leno-input {
    min-width: 180px;
  }
}

@media (max-width: 900px) {
  .header .header-row {
    gap: 10px;
  }
  .center {
    max-width: 600px;
    padding: 0 8px;
  }
  .logo-text {
    font-size: 1.05rem;
  }
  .btn-solid-sm {
    padding: 8px 14px;
    font-size: 0.9rem;
  }
}

@media (max-width: 640px) {
  .header .header-row {
    flex-direction: column;
    align-items: stretch;
    gap: 8px;
  }

  .header .left {
    justify-content: space-between;
  }

  .center {
    order: 2;
    width: 100%;
  }

  .right {
    order: 3;
    justify-content: flex-end;
  }

  .filtros-inline {
    justify-content: flex-start;
    padding-left: 6px;
  }

  .leno-select,
  .leno-input {
    min-width: 160px;
  }

  .main-content {
    margin-top: 140px;
  }
}

  </style>
</head>

<body>
 <!-- Encabezado adaptado al estilo Leno (sticky) -->
<header id="header" class="header">
  <div class="container header-row">
    <!-- IZQUIERDA: Título -->
    <div class="left">
      <h1 class="logo-text m-0 fw-bold text-white">
        <i class="fas fa-film"></i> Menú de Series
      </h1>
    </div>

    <!-- CENTRO: filtros (misma estructura y mismos ids que usas) -->
    <div class="center">
      <div class="filtros-inline">
        <select id="menuSeries" class="leno-select">
          <option value="">Todas las series</option>
        </select>

        <input type="text" id="buscador" class="leno-input" placeholder="Buscar por nombre parcial...">

        <select id="ordenar" class="leno-select">
          <option value="az">Orden A-Z</option>
          <option value="za">Orden Z-A</option>
        </select>
      </div>
    </div>

    <!-- DERECHA: Botón cerrar sesión -->
    <div class="right">
      <a href="index.html" class="btn-solid-sm">
        <i class="fas fa-sign-out-alt"></i> Cerrar sesión
      </a>
    </div>
  </div>
</header>

<!-- Contenido principal (con margen-top para el header fijo) -->
<main class="main-content container">
  <div class="series-grid" id="contenedorSeries"></div>
</main>

  <!-- Scripts base del tema Leno -->
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script src="js/custom.js"></script>

  <!-- Lógica Firebase y renderizado (sin cambios en ids ni lógica) -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyB6MY2y5uyum87PdUHUpY8NNh4D73Yhx4U",
      authDomain: "animes-plus-89b93.firebaseapp.com",
      projectId: "animes-plus-89b93",
      storageBucket: "animes-plus-89b93.appspot.com",
      messagingSenderId: "402867181985",
      appId: "1:402867181985:web:d695b12977fe4270dbd3e0",
      measurementId: "G-DN632G7XJT"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    let todasLasSeries = [];
    let nombresUnicos = new Set();

    async function cargarSeries() {
      const snapshotSeries = await db.collection("animes-series-portadas").get();
      const datosTemporales = [];

      for (const docSerie of snapshotSeries.docs) {
        const nombreSerie = docSerie.id;
        nombresUnicos.add(nombreSerie);

        const snapshotTemporadas = await db.collection("animes-series-portadas")
          .doc(nombreSerie).collection("Temporadas").get();

        snapshotTemporadas.forEach(docTemporada => {
          const temporada = docTemporada.id;
          const data = docTemporada.data();
          const imagen = data.imagen || "https://via.placeholder.com/300x400?text=Sin+Imagen";
          const sitio = data.sitio02 || "#";

          datosTemporales.push({
            nombre: nombreSerie,
            temporada: temporada,
            imagen: imagen,
            sitio: sitio
          });
        });
      }

      todasLasSeries = datosTemporales;
      poblarMenuSeries();
      renderizarSeries();
    }

    function poblarMenuSeries() {
      const select = document.getElementById("menuSeries");
      [...nombresUnicos].sort().forEach(nombre => {
        const opcion = document.createElement("option");
        opcion.value = nombre;
        opcion.textContent = nombre;
        select.appendChild(opcion);
      });
    }

    function renderizarSeries() {
      const contenedor = document.getElementById("contenedorSeries");
      contenedor.innerHTML = "";

      const filtroNombre = document.getElementById("buscador").value.toLowerCase();
      const filtroSeleccionado = document.getElementById("menuSeries").value;
      const orden = document.getElementById("ordenar").value;

      let filtradas = todasLasSeries.filter(s => {
        const coincideTexto = s.nombre.toLowerCase().includes(filtroNombre);
        const coincideSeleccion = !filtroSeleccionado || s.nombre === filtroSeleccionado;
        return coincideTexto && coincideSeleccion;
      });

      filtradas.sort((a, b) => {
        if (orden === "az") return a.nombre.localeCompare(b.nombre);
        else return b.nombre.localeCompare(a.nombre);
      });

      filtradas.forEach(serie => {
        const card = document.createElement("div");
        card.className = "serie-card";
        card.innerHTML = `
          <img src="${serie.imagen}" alt="Portada de ${serie.nombre}">
          <div class="serie-info">
            <h3>${serie.nombre}</h3>
            <p>${serie.temporada}</p>
            <a class="btn-ver" href="${serie.sitio}" target="_blank">Ver</a>
          </div>
        `;
        contenedor.appendChild(card);
      });
    }

    document.getElementById("buscador").addEventListener("input", renderizarSeries);
    document.getElementById("menuSeries").addEventListener("change", renderizarSeries);
    document.getElementById("ordenar").addEventListener("change", renderizarSeries);

    cargarSeries();
  </script>
</body>
</html>
